<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ëê•‰∏öÁÉ≠ÂäõÂõæ</title>
    <style>
        :root {
            --bg-color: #f5f5f7;
            --card-bg: #ffffff;
            --primary: #FF5A00;
            --text: #1d1d1f;
            --gray: #86868b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            padding-bottom: 80px;
        }

        /* È°∂ÈÉ®Ê†èÂ∏ÉÂ±ÄË∞ÉÊï¥ */
        header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 20px; 
        }
        h1 { font-size: 24px; margin: 0; }
        
        .lock-btn {
            background: none; border: none; font-size: 24px; cursor: pointer;
        }

        /* Êó•ÂéÜÂå∫Âüü */
        .calendar-container {
            background: var(--card-bg);
            border-radius: 16px; padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .calendar-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 15px; font-weight: bold; font-size: 18px;
        }

        .calendar-grid {
            display: grid; grid-template-columns: repeat(7, 1fr);
            gap: 6px; text-align: center;
        }

        .calendar-day-label { font-size: 12px; color: var(--gray); margin-bottom: 5px; }

        .calendar-day {
            aspect-ratio: 1; display: flex; align-items: center; justify-content: center;
            border-radius: 8px; font-size: 14px; cursor: pointer; transition: all 0.2s;
            border: 2px solid transparent;
        }
        .calendar-day.selected { border-color: #000; transform: scale(1.1); z-index: 2; }

        .level-0 { background-color: #f0f0f5; color: #aaa; }
        .level-1 { background-color: #ffe4d6; color: #d64000; }
        .level-2 { background-color: #ffb088; color: #fff; }
        .level-3 { background-color: #FF5A00; color: #fff; font-weight:bold; }
        .level-4 { background-color: #cc3300; color: #fff; font-weight:bold; }

        .current-date-display { text-align: center; font-size: 16px; color: var(--gray); margin-bottom: 10px; }

        .daily-summary-card {
            background: #fff; border-left: 5px solid var(--primary);
            border-radius: 8px; padding: 15px; margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .summary-title { font-weight: bold; font-size: 16px; margin-bottom: 8px; display: block;}
        .summary-content { font-size: 14px; line-height: 1.6; }
        .summary-item { margin-bottom: 4px; }
        .empty-msg { color: #aaa; font-style: italic; }

        .member-card {
            background: var(--card-bg); border-radius: 16px; padding: 20px;
            margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.03);
        }

        .member-header {
            display: flex; align-items: center; margin-bottom: 15px;
            border-bottom: 1px solid #eee; padding-bottom: 10px;
        }

        .avatar-circle {
            width: 40px; height: 40px; background-color: #fff0e6;
            border-radius: 50%; margin-right: 12px;
            display: flex; align-items: center; justify-content: center; font-size: 22px;
        }

        .member-name { font-size: 18px; font-weight: bold; }

        .counter-row {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 12px; padding: 4px 0;
        }
        .category-label { font-size: 15px; font-weight: 500; }
        .counter-controls { display: flex; align-items: center; background: #f2f2f7; border-radius: 8px; padding: 2px; }
        .btn { width: 32px; height: 32px; border: none; background: white; border-radius: 6px; font-size: 18px; color: var(--primary); cursor: pointer; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .btn:active { transform: scale(0.95); background: #ffe4d6; }
        .count-display { width: 40px; text-align: center; font-size: 16px; font-weight: 600; border: none; background: transparent; outline: none; }
        .note-input { width: 100%; border: 1px solid #eee; border-radius: 8px; padding: 10px; margin-top: 10px; font-size: 14px; background: #fafafa; box-sizing: border-box; }
        .total-badge { margin-left: auto; background: var(--primary); color: white; font-size: 12px; padding: 2px 8px; border-radius: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <h1>üìÖ Ëê•‰∏öÁÉ≠ÂäõÂõæ</h1>
        <button class="lock-btn" onclick="toggleLock()" id="lockIcon">üîí</button>
    </header>

    <div class="calendar-container">
        <div class="calendar-header">
            <span id="calendarMonthYear">Month Year</span>
            <div>
                <button class="btn" onclick="changeMonth(-1)" style="width:auto; padding:0 10px;">&lt;</button>
                <button class="btn" onclick="changeMonth(1)" style="width:auto; padding:0 10px;">&gt;</button>
            </div>
        </div>
        <div class="calendar-grid" id="calendarGrid"></div>
    </div>

    <div class="current-date-display">
        ÂΩìÂâçÊü•Áúã: <span id="displayDate" style="font-weight:bold; color:var(--text);"></span>
    </div>

    <div class="daily-summary-card">
        <span class="summary-title">üìù ÂΩìÊó•Ëê•‰∏öËØ¶ÊÉÖÔºö</span>
        <div id="summaryContent" class="summary-content"></div>
    </div>

    <input type="date" id="currentDate" style="display:none">
    <div id="app"></div>

    <script>
        // === üîí ÈöêÁßÅÈÖçÁΩÆ ===
        // "private: true" ÁöÑ‰∫∫ÔºåÂè™ÊúâËß£ÈîÅÂêéÊâçËÉΩÁúãÂà∞
        // ËøôÈáåÁöÑÂØÜÁ†ÅÊòØ "riize"Ôºå‰Ω†ÂèØ‰ª•Âú®‰∏ã‰∏ÄË°å‰øÆÊîπÂÆÉ
        const SECRET_PASSWORD = "riize"; 
        
        let isUnlocked = false; // ÈªòËÆ§ÊòØÈîÅÂÆöÁä∂ÊÄÅ

        const members = [
            { name: "Kevin", emoji: "üåô", private: false }, // Kevin ÂØπÂ§ñÂÖ¨ÂºÄ
            { name: "Anton", emoji: "ü¶ï", private: true },  // ÈöêËóè
            { name: "Sungchan", emoji: "üçä", private: true }, // ÈöêËóè
            { name: "Eunseok", emoji: "ü™®", private: true }  // ÈöêËóè
        ];

        const categories = ["IG Post", "IG Story", "Weverse", "TikTok", "Message", "Live"];
        
        // ===============

        const app = document.getElementById('app');
        const dateInput = document.getElementById('currentDate');
        const displayDate = document.getElementById('displayDate');
        const summaryContent = document.getElementById('summaryContent');
        const lockIcon = document.getElementById('lockIcon');
        
        let today = new Date();
        dateInput.valueAsDate = today;
        let calendarViewDate = new Date(); 

        // üîí Ëß£ÈîÅÈÄªËæë
        function toggleLock() {
            if (isUnlocked) {
                // Â¶ÇÊûúÂ∑≤ÁªèËß£ÈîÅÔºåÁÇπÂáªÂèòÂõûÈîÅÂÆö
                isUnlocked = false;
                lockIcon.textContent = "üîí";
                alert("Â∑≤ÈîÅÂÆöÔºöÂè™ÊòæÁ§∫ÂÖ¨ÂºÄÊàêÂëò");
                render(); 
            } else {
                // Â¶ÇÊûúÊòØÈîÅÂÆöÁä∂ÊÄÅÔºåÁÇπÂáªËæìÂÖ•ÂØÜÁ†Å
                const pwd = prompt("ËØ∑ËæìÂÖ•Êü•ÁúãÂØÜÁ†ÅÔºö");
                if (pwd === SECRET_PASSWORD) {
                    isUnlocked = true;
                    lockIcon.textContent = "üîì";
                    alert("Ëß£ÈîÅÊàêÂäüÔºÅÊòæÁ§∫ÂÖ®ÂëòÊï∞ÊçÆ");
                    render();
                } else {
                    alert("ÂØÜÁ†ÅÈîôËØØÔºÅ");
                }
            }
        }

        function render() {
            app.innerHTML = '';
            const dateKey = dateInput.value;
            displayDate.textContent = dateKey;

            // ËøáÊª§ÊàêÂëòÔºöÂ¶ÇÊûúÊ≤°Ëß£ÈîÅÔºåÂè™ÊòæÁ§∫ private: false ÁöÑ‰∫∫
            const visibleMembers = members.filter(m => isUnlocked || !m.private);

            visibleMembers.forEach(member => {
                const card = document.createElement('div');
                card.className = 'member-card';

                let totalToday = 0;
                categories.forEach(cat => totalToday += getData(dateKey, member.name, cat));

                let html = `
                    <div class="member-header">
                        <div class="avatar-circle">${member.emoji}</div>
                        <span class="member-name">${member.name}</span>
                        ${totalToday > 0 ? `<span class="total-badge">${totalToday}</span>` : ''}
                    </div>
                `;

                categories.forEach(cat => {
                    const count = getData(dateKey, member.name, cat);
                    html += `
                        <div class="counter-row">
                            <span class="category-label">${cat}</span>
                            <div class="counter-controls">
                                <button class="btn" onclick="updateCount('${member.name}', '${cat}', -1)">-</button>
                                <input type="number" class="count-display" value="${count}" 
                                       onchange="manualInput('${member.name}', '${cat}', this.value)">
                                <button class="btn" onclick="updateCount('${member.name}', '${cat}', 1)">+</button>
                            </div>
                        </div>
                    `;
                });

                const note = getNote(dateKey, member.name);
                html += `<input type="text" class="note-input" placeholder="üìù Â§áÊ≥®..." value="${note}" oninput="saveNote('${member.name}', this.value)">`;

                card.innerHTML = html;
                app.appendChild(card);
            });

            renderSummary(dateKey, visibleMembers);
            renderCalendar(visibleMembers);
        }

        function renderSummary(dateKey, visibleMembers) {
            let summaryHTML = '';
            let hasActivity = false;

            visibleMembers.forEach(member => {
                let memberActivities = [];
                categories.forEach(cat => {
                    const count = getData(dateKey, member.name, cat);
                    if (count > 0) memberActivities.push(`${cat} x${count}`);
                });

                const note = getNote(dateKey, member.name);
                if (note) memberActivities.push(`"${note}"`);

                if (memberActivities.length > 0) {
                    hasActivity = true;
                    summaryHTML += `
                        <div class="summary-item">
                            ${member.emoji} <b>${member.name}</b>: ${memberActivities.join(', ')}
                        </div>
                    `;
                }
            });

            if (!hasActivity) {
                summaryContent.innerHTML = '<span class="empty-msg">üò¥ Ëøô‰∏ÄÂ§©ÈùûÂ∏∏ÂÆâÈùô...</span>';
            } else {
                summaryContent.innerHTML = summaryHTML;
            }
        }

        function renderCalendar(visibleMembers) {
            const grid = document.getElementById('calendarGrid');
            const header = document.getElementById('calendarMonthYear');
            grid.innerHTML = ''; 
            
            const year = calendarViewDate.getFullYear();
            const month = calendarViewDate.getMonth();
            header.textContent = `${year}Âπ¥ ${month + 1}Êúà`;

            const weekDays = ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'];
            weekDays.forEach(d => {
                const div = document.createElement('div');
                div.className = 'calendar-day-label';
                div.textContent = d;
                grid.appendChild(div);
            });

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            for (let i = 0; i < firstDay; i++) {
                grid.appendChild(document.createElement('div'));
            }

            for (let i = 1; i <= daysInMonth; i++) {
                const dayDiv = document.createElement('div');
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                
                dayDiv.textContent = i;
                
                // üî• ÈáçÁÇπÔºöÁÉ≠ÂäõÂõæÂè™ËÆ°ÁÆó‚ÄúÂèØËßÅÊàêÂëò‚ÄùÁöÑÊï∞ÊçÆ
                // Â¶ÇÊûúÊ≤°Ëß£ÈîÅÔºåÂ∞±ÁÆó Anton Ëê•‰∏ö‰∫Ü 100 Ê¨°ÔºåÊó•ÂéÜ‰∏ä‰πü‰∏ç‰ºöÊòæÁ§∫È¢úËâ≤
                const totalActivity = getDailyTotal(dateStr, visibleMembers);
                
                let heatClass = 'level-0';
                if (totalActivity >
